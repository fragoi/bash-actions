#!/bin/bash -e

base=$1
index=$2

pattern='[[:alnum:]]+[^[:alnum:]]*$'

while (( index >= 0 )) && [[ "$base" =~ $pattern ]]; do
  base=${base:0:-${#BASH_REMATCH}}
  (( index-- )) || true
done

if (( index >= 0 )); then
  exit 1
fi

echo "${base}"
